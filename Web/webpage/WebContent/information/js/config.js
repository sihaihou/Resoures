var search_data={"c2":{"id4":{"cateid":"2","action":"http:\/\/www.baidu.com\/s","form_name":"wd","name":"\u767e\u5ea6","imgpath":"images\/s\/baidu.gif","params":"ie:'utf8'","displayorder":"3"},"def":"4","id13":{"cateid":"2","action":"http:\/\/www.google.com.hk\/search","form_name":"q","name":"\u8c37\u6b4c","imgpath":"images\/s\/google.gif","params":"","displayorder":"3"},"id36":{"cateid":"2","action":"http:\/\/www.sogou.com\/sogou","form_name":"query","name":"\u641c\u72d7","imgpath":"images\/s\/sogou.gif","params":"pid:'sogou-site-220c77af02f8ad85'","displayorder":"5"},"id22":{"cateid":"2","action":"http:\/\/www.soso.com\/q","form_name":"w","name":"SOSO","imgpath":"images\/s\/soso.gif","params":"ie:'utf-8'","displayorder":"5"},"id46":{"cateid":"2","action":"http:\/\/www.so.com\/s","form_name":"q","name":"360\u641c\u7d22","imgpath":"images\/s\/360.gif","params":"ie:'utf8'","displayorder":"6"}},"c8":{"id29":{"cateid":"8","action":"http:\/\/news.baidu.com\/ns","form_name":"word","name":"\u767e\u5ea6\u65b0\u95fb","imgpath":"images\/s\/news.gif","params":"ie:'utf8'","displayorder":"1"},"def":"29","id33":{"cateid":"8","action":"http:\/\/news.google.com.hk\/news\/search","form_name":"q","name":"\u8c37\u6b4c","imgpath":"images\/s\/google.gif","params":"ie:'utf8'","displayorder":"2"},"id27":{"cateid":"8","action":"http:\/\/news.soso.com\/n.q","form_name":"w","name":"\u641c\u641c\u65b0\u95fb","imgpath":"images\/s\/soso.gif","params":"cid: \"union.s.wh\",\r\nie:'utf-8'","displayorder":"4"}},"c9":{"id16":{"cateid":"9","action":"http:\/\/mp3.baidu.com\/m","form_name":"word","name":"\u767e\u5ea6\u97f3\u4e50","imgpath":"images\/s\/bdmusic.gif","params":"ie:'utf-8',\r\n ","displayorder":"1"},"def":"16","id43":{"cateid":"9","action":"http:\/\/mp3.sogou.com\/music","form_name":"query","name":"\u641c\u72d7\u97f3\u4e50","imgpath":"images\/s\/sogou.gif","params":"ie:'utf-8'","displayorder":"2"},"id23":{"cateid":"9","action":"http:\/\/cgi.music.soso.com\/fcgi-bin\/m.q","form_name":"w","name":"\u641c\u641cmp3","imgpath":"images\/s\/soso.gif","params":"unc: \"s200000_7\",\r\ncid: \"union.s.wh\",\r\nie:'utf-8'","displayorder":"3"}},"c10":{"id17":{"cateid":"10","action":"http:\/\/video.baidu.com\/v","form_name":"word","name":"\u767e\u5ea6\u89c6\u9891","imgpath":"images\/s\/video.gif","params":"ct:'301989888',\r\nrn:'20',\r\npn:'0',\r\ndb:'0',\r\ns:'0',\r\nfbl:'800',\r\nie:'utf-8'","displayorder":"1"},"def":"17","id25":{"cateid":"10","action":"http:\/\/www.google.com.hk\/search","form_name":"q","name":"\u8c37\u6b4c","imgpath":"images\/s\/google.gif","params":"tbo: \"p\",\r\ntbs: \"vid:1\",\r\nsource: \"vgc\",\r\nie:'utf8'","displayorder":"2"}},"c11":{"id18":{"cateid":"11","action":"http:\/\/image.baidu.com\/i","form_name":"word","name":"\u767e\u5ea6\u56fe\u7247","imgpath":"images\/s\/pic.gif","params":"ct: \"201326592\",\r\ncl: \"2\",\r\npv: \"\",\r\nlm: \"-1\",\r\nie:'utf-8'","displayorder":"1"},"def":"18","id26":{"cateid":"11","action":"http:\/\/images.google.com.hk\/search","form_name":"q","name":"\u8c37\u6b4c","imgpath":"images\/s\/google.gif","params":"gbv: \"2\",\r\nsource: \"hp\",\r\nhl: \"zh-CN\",\r\nie:'utf8'","displayorder":"2"}},"c12":{"id32":{"cateid":"12","action":"http:\/\/map.baidu.com\/m","form_name":"word","name":"\u767e\u5ea6\u5730\u56fe","imgpath":"images\/s\/map.gif","params":"ie:'utf8'","displayorder":"1"},"def":"32","id21":{"cateid":"12","action":"http:\/\/ditu.google.cn\/maps","form_name":"q","name":"\u8c37\u6b4c\u5730\u56fe","imgpath":"images\/s\/google.gif","params":"ie:'utf8'","displayorder":"2"}},"c13":{"id31":{"cateid":"13","action":"http:\/\/zhidao.baidu.com\/q","form_name":"word","name":"\u767e\u5ea6\u4e00\u4e0b","imgpath":"images\/s\/zhidao.gif","params":"tn: \"ikaslist\",\r\nct: \"17\",\r\npt: \"ylmf_ik\",\r\nie:'utf8'","displayorder":"1"},"def":"31","id44":{"cateid":"13","action":"http:\/\/wenwen.soso.com\/z\/Search.e","form_name":"sp","name":"\u641c\u641c\u95ee\u95ee","imgpath":"images\/s\/soso.gif","params":"ie:'utf-8'","displayorder":"2"}},"c14":{"id41":{"cateid":"14","action":"http:\/\/s8.taobao.com\/search","form_name":"q","name":"\u6dd8\u5b9d\u7f51","imgpath":"images\/s\/taobao.gif","params":"pid:'mm_10054659_3403176_13288197'","displayorder":"1"},"def":"41","id45":{"cateid":"14","action":"http:\/\/search.dangdang.com\/","form_name":"key","name":"\u5f53\u5f53\u7f51","imgpath":"images\/s\/dangdang.gif","params":"from:'P-299711'","displayorder":"2"},"id42":{"cateid":"14","action":"http:\/\/search.jd.com\/Search","form_name":"keyword","name":"\u4eac\u4e1c\u5546\u57ce","imgpath":"images\/s\/360buy.gif","params":"enc:'utf-8',unionId:'21373'","displayorder":"3"}}}; var search_def={"cid":"2","id":"4"};  var setting={ path:'/skins/setting',  showWindows:function(){ ui.load('个性设置',__WWWROOT__+setting.path+'/index.html'); }, background:function(){ ui.load('设置背景/颜色',__WWWROOT__+setting.path+'/background.html'); }, linkopen:function(){ ui.load('设置打开链接的方式',__WWWROOT__+setting.path+'/linkopen.html'); },  changeCate:function(cateid,obj){ $('.list_cate_li').removeClass('hover'); $(obj).addClass('hover'); $('.setting_background_list').find('ul').hide(); if($('#setting_background_list_'+cateid).html()){ $('#setting_background_list_'+cateid).show(); }else $.get(__WWWROOT__+'/skins/setting/cate/cate_'+cateid+'.html',function(txt){ $('.setting_background_list').append(txt); }); },  set:function(filename,tile){ setCookie('logo234_bg',filename); setCookie('logo234_bg_tile',tile); set_bg(filename,tile); },  setColor:function(color){ var before_color=getCookie('logo234_color'); if(color==null || color=='' || color==undefined){ if(before_color) $('.'+before_color).addClass(before_color+'-hover'); return false; } if(before_color) $('.'+before_color).attr('class',before_color); $('.'+color).addClass(color+'-hover'); setCookie('logo234_color',color); set_color(color); } }; function set_bg(bg,tile){ if(bg==undefined){ bg=getCookie('logo234_bg'); tile=getCookie('logo234_bg_tile'); } var is_tile='no-repeat'; if(tile>null){ is_tile='repeat'; } if(bg){ $('body').css({ 'background-image':'url("'+__BG__+'/'+bg+'")', 'background-position':'50% 0%', 'background-repeat':is_tile }); } } function set_color(color){ if(color==undefined) color=getCookie('logo234_color'); if(color) $('#style').attr('href',__WWWROOT__+'/skins/style/'+color+'.css'); } function set_default(){ if(!confirm('确定恢复默认？已设置的背景和配色均会丢失，且不可恢复...')) return false; var arr=new Array('logo234_bg_tile','logo234_bg','logo234_color'); for (var i in arr){ setCookie(arr[i],'',-1); } ui.load_close(); ui.success('重置成功...',location.href); } function set_resetall(){ if(!confirm('确定重置所有设置？背景,配色,和定制的网站等均会丢失，且不可恢复...')) return false; var arr=new Array('logo234_customize','logo234_bg_tile','logo234_bg','logo234_color','logo234-search'); for (var i in arr){ setCookie(arr[i],'',-1); } ui.load_close(); ui.success('重置成功...',location.href); }  var ilogo234={ share:function(){ customize.share(); }, setting:function(){ setting.background(); }, customize:function(){ customize.init(); } };  function set_customize_off(){ customize.start(); }  var customize={ move_bg:'<div class="customize-move-bg" ></div>', temp:'customizing-temp', cookie_name:'logo234_customize', html:function(id){ var htm='<a class="plus" href="javascript:void(0);" onclick="customize.change('+id+',this);">&nbsp;</a>'; return htm; }, init:function(){ $('#home-box').find('li').each(function(key){ $(this).append(customize.html(key)); }); $('#ilogo234-step-1').hide(); $('#ilogo234-step-2').show(); }, change:function(location,obj){ $('.'+customize.temp).removeClass(customize.temp); ui.load('定制网址',__WWWROOT__+'/skins/setting/customize.html'); $(obj).parents('li').addClass(customize.temp); }, query:function(){ var url=__WWWROOT__+'/search.php'; var keyword=$('#site-search_keyword').val(); var type=$('#site-search_type').val(); if(!keyword){ $('#site-search_res').html('请输入关键字...'); return false; } $.post(url,{keyword:keyword,type:type},function(txt){ $('#site-search_res').html(txt); }); },  search_hot_keyword:function(obj){ obj=$(obj); var value=obj.html(); $('#site-search_keyword').val(value); $('#site-search_type').val('name'); $('#site-search_form').submit(); }, set:function(id,title,url,logopath){ var obj=$('.'+customize.temp); obj.attr('id','logo-'+id); obj.find('img').attr({'src':__WWWROOT__+'/data/logo/'+logopath,'alt':title}); obj.find('.home-logo-a').attr({'href':url,'title':title}); ui.load_close(); }, get_ids:function(){ var ids=','; $('#home-box').find('li').each(function(){ ids+=id_filter($(this).attr('id'))+','; }); ids=ids.slice(1, ids.length-1); return ids; }, update_cookie:function(){ cookie=customize.get_ids(); setCookie(customize.cookie_name,cookie); },  apply:function(ids){ if(!confirm('确定应用？您之前定制的所有网址都将被覆盖，且不可恢复...')) return false; setCookie(customize.cookie_name,ids); ui.success('应用成功',__WWWROOT__); }, share:function(){ var ids=customize.get_ids(); var url='http:\/\/'+location.hostname+__WWWROOT__+'?ids='+ids; $.post(__WWWROOT__+setting.path+'/share.php',{url:url},function(txt){ ui.load('分享我的定制','','',txt); }); }, reset:function(){ if(confirm('确定重置？您之前定制的所有网址都将丢失，且不可恢复...')){ setCookie(customize.cookie_name,'',-1); ui.success('重置成功...',__WWWROOT__); } }, finish:function(){ customize.update_cookie(); $('.plus').remove(); $('#ilogo234-step-2').hide(); $('#ilogo234-step-1').show(); window.location.reload(); }, cancel:function(){ $('.plus').remove(); $('#ilogo234-step-2').hide(); $('#ilogo234-step-1').show(); window.location.reload(); } };  function id_filter(str){ var loc=str.indexOf('-')+1; return str.substr(loc); }  function setCookie(key,value,expiredays) { if(expiredays==undefined || expiredays==null) expiredays=365;var exdate=new Date(); exdate.setDate(exdate.getDate()+expiredays); var path=__WWWROOT__?__WWWROOT__:'/'; document.cookie=key+ "=" +escape(value)+((expiredays==null) ? "" : ";expires="+exdate.toGMTString())+";path="+path; }  function getCookie(c_name) { if (document.cookie.length>0){ c_start=document.cookie.indexOf(c_name + "="); if (c_start!=-1){ c_start=c_start + c_name.length+1; c_end=document.cookie.indexOf(";",c_start); if (c_end==-1) c_end=document.cookie.length; return unescape(document.cookie.substring(c_start,c_end)); } } return ""; } function getCookie_5w(a) { var b = a + "="; var c = ""; if (document.cookie.length > 0) { offset = document.cookie.lastIndexOf(b); if (offset != -1) { offset += b.length; end = document.cookie.indexOf(";", offset); if (end == -1) { end = document.cookie.length; } c = unescape(document.cookie.substring(offset, end)); } } return c; } function SetCookie_5w(c, e, a, f, d) { var b = new Date(); b.setTime(b.getTime() + 30 * 24 * 60 * 60); a = b.toGMTString(); f = "/"; d = ""; document.cookie = c + "=" + escape(e) + ("; expires=" + a) + ("; path=" + f) + ";"; }  function draggable(){ var obj=new Drag(); obj.init(); } function Drag(){ this.wrap='#ui_load_wraper'; this.move='#ui_load_title'; this.init=function(){ var bool=false; var wrap=this.wrap; $(this.move).mousedown(function(d){ bool=true; var position=$(wrap).offset(); var y=position.top; var x=position.left; y=d.pageY-y; x=d.pageX-x; $(document).bind("selectstart",function(){return false;}); $(document).mousemove(function(e){ if(!bool) return false; y_f=e.pageY-y; x_f=e.pageX-x; if(y_f<=0) y_f=0; if(x_f<=0) x_f=0; x_max=$(window).width()-$(wrap).outerWidth(); y_max=$(window).height()-$(wrap).outerHeight(); if(y_f>=y_max) y_f=y_max; if(x_f>=x_max) x_f=x_max; $(wrap).css({'position':'fixed','left':x_f+'px','top':y_f+'px','display':'block'}); }).mouseup(function(){ bool=false; }); }).mouseup(function(){ bool=false; $(document).bind("selectstart",function(){return true; }); }); }; } var copyText = function(str){ if(browerKernel.isIE()){ clipboardData.setData('Text', str); alert("站点链接已经复制到你的粘贴板中\n您可使用CTRL+V粘贴"); }else{ prompt("您的浏览器不支持自动复制,请按CTRL+C手动复制:", str); } }; var setHome=function(obj,hostname){ if(!browerKernel.isIE()){ alert("您的浏览器不支持自动设置主页，请使用浏览器菜单手动设置。"); return false; } var host = hostname; if(!host){ host = window.location.href; } obj.style.behavior = 'url(#default#homepage)'; obj.setHomePage(host); }; var UA = navigator.userAgent.toLowerCase(); var browerKernel = { isIE : function(){ if(/msie/i.test(UA) && !/opera/.test(UA)) return true; else return false; } };  $(document).ready(function(){ set_bg(); set_search(null,1); site_plus(); }); function site_plus(){ var opa='0.4'; $('.site-plus-icon').mouseover(function(){ $(this).parents('li').css('z-index',2); $(this).css('opacity','1'); var obj=$(this).next('.site-plus-box'); obj.show(); var position= $(this).offset(); var y=position.top; var y_max=$(window).height()-obj.outerHeight(); y_max-=20; if(y<y_max){ obj.removeClass('site-plus-box-up').addClass('site-plus-box-down'); } }).mouseout(function(){ $(this).parents('li').css('z-index',1); $(this).css('opacity',opa); $(this).next('.site-plus-box').hide(); }); $('.site-plus-box').mouseover(function(){ $(this).parents('li').css('z-index',2); $(this).show(); $(this).prev('.site-plus-icon').css('opacity',1); }).mouseout(function(){ $(this).parents('li').css('z-index',1); $(this).hide(); $(this).prev('.site-plus-icon').css('opacity',opa); }); } function set_search(def,onload){ if(def==null || def==undefined){ def=getCookie('logo234-search'); if(def && def!=search_def.id){ if(onload) $('.search-logo').hide(); search.change_engine(search_def.cid,def); if(onload) $('.search-logo').fadeIn(); } return false; } setCookie('logo234-search',def); } var search={ icon_open:function(){ $('.search-toggle-icon').css("background-position","0 -6px"); }, icon_close:function(){ $('.search-toggle-icon').css("background-position","0 0px"); }, slide:function(){ $('.search-logo').mouseover(function(){ $(this).addClass('search-logo-hover'); }).mouseout(function(){ $(this).removeClass('search-logo-hover'); }); $('.search-logo-hover').live('click',function(){ var obj=$('.select-list'); obj.toggleClass('open'); if(obj.hasClass('open')){ search.icon_open(); } }); $('body').live('mouseup',function(){ var obj=$('.search-logo'); if(!obj.hasClass('search-logo-hover') ){ search.icon_close(); $('.select-list').removeClass('open'); } }); }, init:function(){ $(document).ready(function(){ search.slide(); $('.search-tab .search-cate').click(function(){ $('.search-tab .search-cate').removeClass('on'); $(this).addClass('on'); var cateid=$(this).attr('cateid'); search.change_cate(cateid); }); $('.select-list a').live('click',function(){ var cateid=$(this).attr('cateid'); var id=$(this).attr('s_id'); search.change_engine(cateid, id); var def=$('.search-cate-def').attr('cateid'); if(def==cateid) set_search(id); }); $('.search-cate-def').click(function(){ set_search(); }); }); }, change_cate:function(cateid){ var catelist=eval('search_data.c'+cateid); var html=''; for (var id in catelist) { if(typeof(catelist[id])=='object'){ html+='<a title="'+catelist[id].name+'" cateid="'+catelist[id].cateid+'" s_id="'+id.substr(2)+'" style="background-image: url('+__WWWROOT__+'/'+catelist[id].imgpath+');"></a>'; } } search.change_engine(cateid,catelist.def); $('.select-list').html(html); }, change_engine:function(cateid,id){ var data=eval('search_data.c'+cateid+'.id'+id); if(data==undefined || data===null) return false; var obj=$('.search-logo'); obj.attr('title',data.name); obj.find('img').attr('src',__WWWROOT__+'/'+data.imgpath); $('#search-form').attr('action',data.action); $('#search-keyword').attr('name',data.form_name); var html=''; if(data.params!=null && data.params!=undefined){ var params=eval('({'+data.params+'})'); for (var id in params){ html+='<input type="hidden" name="'+id+'" value="'+params[id]+'">'; } } $('#search-params').html(html); } };  var ui={ success:function(message,url,error){ var s_e_class= (error==1)?"ui_success_box ui_error_box":"ui_success_box"; var html="<div id='ui_box' class='"+s_e_class+"'><div id='ui_messagecontent'>"+message+"</div></div>"; var show=function(){ var bg='<div class="box_bg" style="width: 100%; height:'+jQuery(document).height()+'px; z-index: 999;filter: alpha(opacity=35);-moz-opacity: 0.35;opacity: 0.35;"></div>'; $('body').append(html); $('body').append(bg); var v = ui._viewport() ; $( '#ui_box' ).css({ 'left':( v.left + v.width/2 - $( '#ui_box' ).outerWidth()/2 ) + "px", 'top':( v.top + v.height/2 - $( '#ui_box' ).outerHeight()/2 ) + "px" }); }; var close=function(){ setTimeout( function(){ $( '#ui_box' ).fadeOut("fast",function(){ jQuery('.box_bg').remove(); jQuery('#ui_box').remove(); if(url!=null && url!=undefined){ location.href=url; } }); } , 1000); }; show(); close(); },  error:function(message){ ui.success(message,'',1); },  confirm:function(obj,text){ var callback=$(obj).attr('callback'); text = text || '确定执行此操作？'; html = '<div id="qc_ui_confirm" class="ui_confirm">'+ '<a class="del" href="javascript:void(0)" onclick="$(\'#qc_ui_confirm\').remove()"></a>'+ '<div class="txt"></div>'+ '<div class="button"><input type="button" value="确定" class="btn"><input type="button" value="取消" class="btn_w"></div>'+ '</div>'; $('body').append(html); var position = $(obj).offset(); $('#qc_ui_confirm').css({"top":position.top+"px","left":position.left-($("#qc_ui_confirm").width()/2)+"px","display":"none"}); $("#qc_ui_confirm .txt").html(text); $('#qc_ui_confirm').fadeIn("fast"); $("#qc_ui_confirm .btn_w").one('click',function(){ $('#qc_ui_confirm').fadeOut("fast"); $('#qc_ui_confirm').remove(); }); $("#qc_ui_confirm .btn").one('click',function(){ $('#qc_ui_confirm').fadeOut("fast"); $('#qc_ui_confirm').remove(); eval(callback); }); }, load:function(title,url,data,inputhtml){ $('.ui_load').remove(); var loading='<div class="ui_loading"></div>'; var html='<div id="ui_load_wraper" class="ui_load">'+ '<div id="ui_load_title" class="title"><h3>'+title+'</h3><a class="del" href="javascript:void(0)" onclick="$(\'.ui_load\').remove()"></a></div>'+ '<div class="ui_load_content">'+loading+'</div>'+ '</div>'; $('body').append(html); var v =ui._viewport(); var objBox=$('.ui_load'); objBox.css({'left':( v.left + v.width/2 - objBox.outerWidth()/2 ) + "px",'top':( v.top + v.height/2 - objBox.outerHeight()/2 ) + "px"}); if(inputhtml>0 || inputhtml>''){ $('.ui_load_content').html(inputhtml); objBox.css({ 'left':( v.left + v.width/2 - objBox.outerWidth()/2 ) + "px", 'top':( v.top + v.height/2 - objBox.outerHeight()/2 ) + "px" }); }else{ if(!data) data=''; $.get(url,{data:data},function(txt){ $('.ui_load_content').html(txt); objBox.css({ 'left':( v.left + v.width/2 - objBox.outerWidth()/2 ) + "px", 'top':( v.top + v.height/2 - objBox.outerHeight()/2 ) + "px" }); }); } draggable(); },  load_close:function(){ $('.ui_load').remove(); }, _viewport: function() { var d = document.documentElement, b = document.body, w = window; return jQuery.extend( jQuery.browser.msie ? { left: b.scrollLeft || d.scrollLeft, top: b.scrollTop || d.scrollTop } : { left: w.pageXOffset, top: w.pageYOffset }, !ui._u(w.innerWidth) ? { width: w.innerWidth, height: w.innerHeight } : (!ui._u(d) && !ui._u(d.clientWidth) && d.clientWidth != 0 ? { width: d.clientWidth, height: d.clientHeight } : { width: b.clientWidth, height: b.clientHeight }) ); }, _u: function() { for (var i = 0; i < arguments.length; i++) if (typeof arguments[i] != 'undefined') return false; return true; },  reload:function(time){ if(time=='' || time==undefined ) time=600; setTimeout('location.reload()',time); } };